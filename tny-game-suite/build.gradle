group "com.tny.game"

apply plugin: "maven"

apply plugin: 'com.google.protobuf'

dependencies {

    testCompile 'com.h2database:h2:1.4.182'
    provided 'javax.servlet:javax.servlet-api:3.0.1'

    compile(
            libs.'jade',
            libs.'druid',
            libs.'protobuf-java',
            libs.'guava',
            project(":tny-game-common"),
            project(":tny-game-base"),
            project(":tny-game-doc"),
            project(":tny-game-cache"),
            project(":tny-game-oplog"),
            project(":tny-game-scanning"),
            project(":tny-game-zookeeper"),
            project(":tny-game-cache-mysql"),
            project(":tny-game-cache-redis"),
            project(":tny-game-oplog-log4j2kafka"),
            project(":tny-game-net-kafka")
    )

}

buildscript {
    repositories {
        maven { url "https://plugins.gradle.org/m2/" }
    }
    dependencies {
        classpath 'com.google.protobuf:protobuf-gradle-plugin:0.8.0'
    }
}

sourceSets {
    main {
        resources {
            srcDirs "src/main/resources"
        }
        proto {
            srcDir 'src/main/proto'
            include '**/*.proto'
        }
    }
}

protobuf {
    protoc {
        artifact = 'com.google.protobuf:protoc:2.6.1'
    }

    generateProtoTasks.generatedFilesBaseDir = 'src'

    generateProtoTasks {
        all().each { task ->
        }
        ofSourceSet('main')
    }
}

idea {
    module {
        sourceDirs += file("src/main/proto");
    }
}